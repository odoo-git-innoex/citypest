<odoo>

    <record id="access_management_form_view_ah" model="ir.ui.view">
        <field name="name">access_management_form_view_ah</field>
        <field name="model">access.management</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <widget name="web_ribbon" title="Deactivated" bg_color="bg-danger"
                            invisible="active" />
                        <field name="active" invisible="1" />
                        <button invisible="not active" class="oe_stat_button"
                            name="toggle_active_value"
                            type="object"
                            icon="fa-stop">
                            <div class="o_stat_info o_form_field">
                                <span style="font-weight: bold;" class="text-danger">Deactivate
                                    Rule</span>
                            </div>
                        </button>
                        <button invisible="active" class="oe_stat_button"
                            name="toggle_active_value"
                            type="object"
                            icon="fa-play">
                            <div class="o_stat_info o_form_field">
                                <span style="font-weight: bold;" class="text-success">Activate
                                    Rule</span>
                            </div>
                        </button>
                        <button name="action_show_rules" type="object" class="oe_stat_button"
                            icon="fa-list-ul">
                            <div class="o_stat_info">
                                <field name="total_rules" class="o_stat_value" />
                                <span class="o_stat_text"> Access Rules</span>
                            </div>
                        </button>
                    </div>
                    <group>
                        <group>
                            <field name="name" default_focus="1" required='1' />
                            <field name="company_ids" options="{'no_create': True}"
                                widget="many2many_tags" groups="base.group_multi_company" />
                            <field name="self_model_ids" widget="many2many_tags" invisible="1" />
                            <field name="total_rules" invisible="1" />
                        </group>
                        <group>
                            <field name="user_ids" widget='many2many_tags'
                                options="{'no_create': True}" domain="[('share','=',False)]" />
                        </group>
                    </group>
                    <group>
                        <group>
                            <field name="create_uid" />
                            <field name="write_uid" />
                        </group>
                        <group>
                            <field name="create_date" />
                            <field name="write_date" />
                        </group>
                    </group>
                    <notebook>
                        <page string='Show Menu'>
                            <label for="set_show_menu_ids" string="Selection Main Menu"/>
                            <field name="set_show_menu_ids" widget="many2many_tags" force_save="1"/>
                            <!-- <button name="remove_show_menu" type="object" class="oe_stat_button"
                                icon="fa-trash">
                                <div class="o_stat_info">
                                    <span style="font-weight: bold;" class="text-danger">Remove
                                        Main Menu</span>
                                </div>
                            </button> -->
                            <field name='show_menu_ids' widget="one2many">
                                <tree editable='bottom'>
                                    <field name="name" context="{'is_access_rights': True}"
                                        options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"
                                        width='13' required='1' />
                                    <field name="display_name" />
                                </tree>
                            </field>
                            <p role="alert"
                                class="fa fa-info-circle  alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden"
                                style="font-size: 15px;letter-spacing: 1px;"> The menu or
                                submenu added on above list will be shown to the defined
                                user(s). If this list is not empty, only these menus (and their parents) will be visible.</p>
                        </page>
                        <page string='Hide Menu'>
                            <field name='hide_menu_ids' widget="one2many">
                                <tree editable='bottom'>
                                    <field name="name" context="{'is_access_rights': True}"
                                        options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"
                                        width='13' required='1' />
                                    <field name="display_name" />
                                </tree>
                            </field>
                            <p role="alert"
                                class="fa fa-info-circle  alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden"
                                style="font-size: 15px;letter-spacing: 1px;"> The menu or
                                submenu added on above list will be hidden from the defined
                                user(s).</p>
                        </page>
                        <page string='Model Access'>
                            <field name='remove_action_ids'>
                                <tree editable='bottom'>
                                    <field name="model_id" context="{'is_access_rights': True}"
                                        options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"
                                        width='13' required='1'
                                        domain="[('id','not in',parent.self_model_ids)]" />
                                    <field name="report_action_ids" width='13'
                                        widget="many2many_tags" options="{'no_create': True}" />
                                    <field name="server_action_ids" width='13'
                                        widget="many2many_tags" options="{'no_create': True}" />
                                    <field name="restrict_create" width='10' />
                                    <field name="restrict_edit" width='10' />
                                    <field name="restrict_delete" width='10' />
                                </tree>
                            </field>
                            <p role="alert"
                                class="fa fa-info-circle  alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden"
                                style="font-size: 15px;letter-spacing: 1px;"> You can Hide reports,
                                Hide action buttons like Create, Edit, Export. <br /><br />Note: the
                                restriction added here will only become hidden for defined users.
                                They can still be accessed by python code or API, so it won't
                                intruppet the process in some cases like from POS and API. If you
                                strictly want to block the Create, Edit, Delete process entirely
                                from the user, you can use the 'Domain Access' Tab of the form and
                                deine the rule there. </p>
                        </page>
                        <page string='Field Access'>
                            <field name='hide_field_ids'>
                                <tree editable='bottom'>
                                    <field name="model_id" context="{'is_access_rights': True}"
                                        options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"
                                        required='1' width='20'
                                        domain="[('id','not in',parent.self_model_ids)]" />
                                    <field name="field_id" context="{'is_access_rights': True}"
                                        options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"
                                        widget='many2many_tags' width='20'
                                        domain="[('model_id','=',model_id)]" />
                                    <field name="invisible" width="20" />
                                    <field name="readonly" width="20" />
                                    <field name="required" width="20" />
                                </tree>
                            </field>
                            <p role="alert"
                                class="fa fa-info-circle  alert alert-info alert-dismissible rounded-0 fade show d-print-none css_editable_mode_hidden"
                                style="font-size: 15px;letter-spacing: 1px;"> You can Hide any
                                field of any model, Turn any field to Read-Only or Set any field
                                as Required for the specified user(s) from here.
                            </p>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="access_management_search_view" model="ir.ui.view">
        <field name="name">access.management.search.view</field>
        <field name="model">access.management</field>
        <field name="arch" type="xml">
            <search string="Access Management">
                <field name="name" string="Name" />
                <field name="user_ids" />
                <field name="active" />
                <field name="create_uid" />
                <separator />
                <filter string="All" name="all"
                    domain="['|', ('active', '=', False), ('active', '=', True)]" />
                <separator />
                <filter string="Archived" name="inactive" domain="[('active', '=', False)]" />
                <group expand="0" string="Group By">
                    <filter string="Created By" name="created_by" domain="[]"
                        context="{'group_by': 'create_uid'}" />
                </group>
            </search>
        </field>
    </record>


    <record id="access_management_tree_view_ah" model="ir.ui.view">
        <field name="name">access_management_tree_view_ah</field>
        <field name="groups_id" eval="[(4, ref('group_access_management_spt'))]" />
        <field name="model">access.management</field>
        <field name="arch" type="xml">
            <tree decoration-muted="(not active)">
                <field name="name" />
                <field name="create_uid" />
                <field name="create_date" />
                <field name="user_ids" widget="many2many_tags" />
                <field name="total_rules" />
                <field name="active" invisible="0" widget="boolean_toggle" />
            </tree>
        </field>
    </record>

    <record id="action_access_management_ah" model="ir.actions.act_window">
        <field name="name">Access Management</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">access.management</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_all': 1}</field>
    </record>

    <menuitem
        id="main_menu_access_management"
        name="Access Management"
        action="action_access_management_ah"
        groups="group_access_management_spt"
        web_icon="js_access_management,static/description/icon.png"
    />

</odoo>
